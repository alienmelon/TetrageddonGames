package tetrigeddon.display {	import mx.utils.Delegate;	import flash.display.*;	import flash.utils.*;	/**	* Spews forth a short stream of random junk.	*/	public class Debris	{				public var _mainTimeline:MovieClip;				public var symbol:String;		private var intervals:Array;				public function Debris(__mainTimeline:MovieClip)		{			//trace("Debris called");			this._mainTimeline = __mainTimeline;						symbol = "";			intervals = new Array();		}				public function spawn(x:Number, y:Number, amount:Number, s:String)		{			//trace("Debris.spawn called");			//Added s:String = "undefined" and changed the check bellow to "undefined"			var i:Number = 0;			if (!isNaN(amount)) amount = 5;			//if (s == undefined) s = this.symbol;			//define s. the string value of s is what gets added.			//if (s == "undefined") s = this.symbol;			//			while (++i < amount)			{				var Debris_Class:Class = getDefinitionByName(s) as Class;				var debris:MovieClip = new Debris_Class();				_mainTimeline.addChild(debris);				//				_mainTimeline.ARR_DISPLAY.push(debris);				//				debris.stop();				debris.cacheAsBitmap = true;				debris.enabled = false;  				debris.buttonMode = false;  				debris.mouseChildren = false;				debris.x = x;				debris.y = y;				//				debris.xMov = Game.randomNumber(-10, 10);				debris.yMov = Game.randomNumber(-10, -20);	//			debris.rotateNum = Game.randomNumber(-5, 5);				debris.floor = Game.randomNumber(570, 570 + (Math.floor(Math.random() * 5)));				debris.iIndex = intervals.length;				debris.counter = 100;				var index:Number = intervals.push(setInterval(this.animate, 20, debris)) - 1;			}		}				private function animate(mc:MovieClip)		{			//trace("Debris.animate("+mc+"); called");			if(_mainTimeline.stopGame){				clearInterval(intervals[mc.iIndex]);				//_mainTimeline.removeChild(mc);			}			if (mc.counter <= 0)			{	//			trace("<<Debris::animate>> Stopping gib " + intervals[mc.iIndex]);				clearInterval(intervals[mc.iIndex]);				//mc.removeMovieClip();				_mainTimeline.removeChild(mc);			}			if (mc.y >= mc.floor)			{				mc.gotoAndStop("collide");				mc.counter -= 5;				return;			}			mc.x += mc.xMov;			mc.y += mc.yMov;			mc.xMov *= .99;			mc.yMov *= .99;			mc.yMov += 3;	//		mc._rotation += mc.rotateNum;		}	}}